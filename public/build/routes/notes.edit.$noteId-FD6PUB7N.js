import{a as J}from"/build/_shared/chunk-HITQAIKO.js";import{a as V}from"/build/_shared/chunk-EXA2H3AC.js";import{a as X}from"/build/_shared/chunk-FPOB764B.js";import{a as T}from"/build/_shared/chunk-IWL4GH55.js";import"/build/_shared/chunk-RT6S2EOS.js";import{e as c,g as w,h as U,o as R,p as A}from"/build/_shared/chunk-2SGSTKRC.js";import{a as I,b as S}from"/build/_shared/chunk-LMXH6R3J.js";import{c as i}from"/build/_shared/chunk-Q3IECNXJ.js";var o=i(I());U();var F=i(V()),H=i(X()),p=i(I());var t=i(S()),Y=T("https://lpbqbqcmlspixeiikhcb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxwYnFicWNtbHNwaXhlaWlraGNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODA2NDU1ODksImV4cCI6MTk5NjIyMTU4OX0.EIGOPYgY4iebJJ1jpJNCoioJZSE9XU83ZPWUhCsgUSk");function k(){var b,x,y,h,v,N;let s=R(),e=A(),g=o.useRef(null),m=o.useRef(null),f=o.useRef(null),C=o.useRef(null),n=o.useRef("false"),[a,E]=(0,p.useState)([]),[Z,j]=(0,p.useState)([]),L=w();o.useEffect(()=>{var l,r,d,u;(l=e==null?void 0:e.errors)!=null&&l.title?(r=m.current)==null||r.focus():(d=e==null?void 0:e.errors)!=null&&d.body&&((u=f.current)==null||u.focus())},[e]);let M=l=>{E(l.target.files[0])},q=async l=>{l.preventDefault(),console.log(a.length);let r=new FormData;if(r.set("id",g.current.value),r.set("title",m.current.value),r.set("body",f.current.value),r.set("noimage",n.current.checked),a.length!==0){let d=`${J()}-${a.name}`,{data:u,error:z}=await Y.storage.from("files").upload(d,a,{cacheControl:"3600",upsert:!1}),O=u.path;r.set("image",O)}console.log(n.current.checked),n.current.checked&&r.set("image",""),L(r,{method:"post"})};return(0,t.jsxs)(c,{name:"form1",method:"post",style:{display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex w-full flex-col gap-1",children:[(0,t.jsx)("input",{ref:g,hidden:!0,name:"id",defaultValue:s.note.id,className:"flex-1 rounded-md border-2 border-blue-500 px-3 text-lg leading-loose"}),(0,t.jsx)("span",{children:"Title: "}),(0,t.jsx)("input",{ref:m,id:"title",name:"title",defaultValue:s.note.title,className:"flex-1 rounded-md border-2 border-blue-500 px-3 text-lg leading-loose","aria-invalid":(b=e==null?void 0:e.errors)!=null&&b.title?!0:void 0,"aria-errormessage":(x=e==null?void 0:e.errors)!=null&&x.title?"title-error":void 0})]}),((y=e==null?void 0:e.errors)==null?void 0:y.title)&&(0,t.jsx)("div",{className:"pt-1 text-red-700",id:"title-error",children:e.errors.title})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex w-full flex-col gap-1",children:[(0,t.jsx)("span",{children:"Body: "}),(0,t.jsx)("textarea",{ref:f,name:"body",defaultValue:s.note.body,rows:8,className:"w-full flex-1 rounded-md border-0 text-gray-50 bg-slate-700 border-slate-800 px-2 py-2 !outline-none text-lg leading-6","aria-invalid":(h=e==null?void 0:e.errors)!=null&&h.body?!0:void 0,"aria-errormessage":(v=e==null?void 0:e.errors)!=null&&v.body?"body-error":void 0})]}),((N=e==null?void 0:e.errors)==null?void 0:N.body)&&(0,t.jsx)("div",{className:"pt-1 text-red-700",id:"body-error",children:e.errors.body})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{children:[(0,t.jsx)("span",{children:"Sem imagem: "}),(0,t.jsx)("input",{ref:n,type:"checkbox",id:"noimage",name:"noimage",value:"true"})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"flex w-full flex-col gap-1",children:[(0,t.jsx)("span",{children:"Img: "}),(0,t.jsx)("input",{ref:C,name:"image",defaultValue:s.note.img,className:"flex-1 rounded-md border-2 border-blue-500 px-3 text-lg leading-loose"}),(0,t.jsx)("input",{type:"file",name:"image",onChange:M})]})}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("button",{type:"submit",className:"rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:bg-blue-400",children:"Save"})})]})}export{k as default};
